<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>개별 모델 테스트</title>
    <style>
        body { 
            font-family: monospace; 
            padding: 20px; 
            background: #1a1a1a; 
            color: #e0e0e0; 
            max-width: 1200px;
            margin: 0 auto;
        }
        .test-section { 
            margin: 30px 0; 
            padding: 20px; 
            background: #2a2a2a; 
            border-radius: 8px; 
            border: 2px solid #444;
        }
        .test-section h2 {
            color: #667eea;
            margin-bottom: 15px;
        }
        .result { 
            margin: 15px 0; 
            padding: 15px; 
            background: #1a1a1a; 
            border-radius: 6px;
            white-space: pre-wrap;
            word-wrap: break-word;
            max-height: 400px;
            overflow-y: auto;
        }
        .success { 
            border-left: 4px solid #22c55e; 
        }
        .error { 
            border-left: 4px solid #ef4444; 
        }
        .loading { 
            border-left: 4px solid #f59e0b; 
        }
        button { 
            padding: 10px 20px; 
            margin: 5px; 
            background: #667eea; 
            color: white; 
            border: none; 
            border-radius: 5px; 
            cursor: pointer; 
            font-size: 14px;
        }
        button:hover { 
            background: #5568d3; 
        }
        .status {
            display: inline-block;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 12px;
            font-weight: bold;
            margin-left: 10px;
        }
        .status.running { background: #f59e0b; color: #000; }
        .status.success { background: #22c55e; color: #fff; }
        .status.error { background: #ef4444; color: #fff; }
    </style>
</head>
<body>
    <h1>개별 AI 모델 테스트</h1>
    
    <!-- Gemini Flash 테스트 -->
    <div class="test-section">
        <h2>Gemini 2.5 Flash <span id="flash-status" class="status"></span></h2>
        <button onclick="testGeminiFlash()">테스트 실행</button>
        <button onclick="testGeminiFlashSimple()">간단한 테스트</button>
        <div id="flash-result" class="result"></div>
    </div>
    
    <!-- Gemini Pro 테스트 -->
    <div class="test-section">
        <h2>Gemini 2.5 Pro <span id="pro-status" class="status"></span></h2>
        <button onclick="testGeminiPro()">테스트 실행</button>
        <button onclick="testGeminiProSimple()">간단한 테스트</button>
        <div id="pro-result" class="result"></div>
    </div>
    
    <!-- GLM 테스트 -->
    <div class="test-section">
        <h2>GLM-4.6 Cloud <span id="glm-status" class="status"></span></h2>
        <button onclick="testGLM()">테스트 실행</button>
        <button onclick="testGLMSimple()">간단한 테스트</button>
        <div id="glm-result" class="result"></div>
    </div>
    
    <!-- DeepSeek 테스트 -->
    <div class="test-section">
        <h2>DeepSeek v3.1 <span id="deepseek-status" class="status"></span></h2>
        <button onclick="testDeepSeek()">테스트 실행</button>
        <div id="deepseek-result" class="result"></div>
    </div>
    
    <script>
        const GEMINI_KEY = 'AIzaSyAmLSwyMGCkDpSojwPjQwTnYmlAQjrdH7g';
        
        function updateStatus(modelId, status, message = '') {
            const statusEl = document.getElementById(`${modelId}-status`);
            statusEl.className = `status ${status}`;
            statusEl.textContent = message || status;
        }
        
        function showResult(modelId, content, type = 'success') {
            const resultEl = document.getElementById(`${modelId}-result`);
            resultEl.className = `result ${type}`;
            resultEl.textContent = content;
        }
        
        // Gemini Flash 테스트
        async function testGeminiFlash() {
            updateStatus('flash', 'running', '실행 중...');
            showResult('flash', '요청 전송 중...', 'loading');
            
            const prompt = "AI가 교육을 어떻게 바꿀까? 한국어로 200자 정도로 설명해주세요.";
            
            try {
                const response = await fetch(
                    `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash-exp:generateContent?key=${GEMINI_KEY}`,
                    {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({
                            contents: [{
                                parts: [{ text: prompt }]
                            }],
                            generationConfig: {
                                temperature: 0.7,
                                maxOutputTokens: 500,
                                topP: 0.9
                            }
                        })
                    }
                );
                
                const responseText = await response.text();
                console.log('Gemini Flash raw response:', responseText);
                
                if (!response.ok) {
                    throw new Error(`HTTP ${response.status}: ${responseText}`);
                }
                
                const data = JSON.parse(responseText);
                const content = data.candidates?.[0]?.content?.parts?.[0]?.text;
                
                if (content) {
                    showResult('flash', `✅ 성공!\n\n${content}`, 'success');
                    updateStatus('flash', 'success', '완료');
                } else {
                    showResult('flash', `⚠️ 콘텐츠 없음\n\n응답 구조:\n${JSON.stringify(data, null, 2)}`, 'error');
                    updateStatus('flash', 'error', '콘텐츠 없음');
                }
                
            } catch (error) {
                showResult('flash', `❌ 오류 발생\n\n${error.message}\n\n${error.stack}`, 'error');
                updateStatus('flash', 'error', '오류');
                console.error('Gemini Flash error:', error);
            }
        }
        
        // Gemini Flash 간단한 테스트
        async function testGeminiFlashSimple() {
            updateStatus('flash', 'running', '간단 테스트 중...');
            
            try {
                const response = await fetch(
                    `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash-exp:generateContent?key=${GEMINI_KEY}`,
                    {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({
                            contents: [{
                                parts: [{ text: "Say hello in Korean" }]
                            }]
                        })
                    }
                );
                
                const data = await response.json();
                const content = data.candidates?.[0]?.content?.parts?.[0]?.text;
                
                showResult('flash', content || '응답 없음', content ? 'success' : 'error');
                updateStatus('flash', content ? 'success' : 'error', content ? '완료' : '실패');
                
            } catch (error) {
                showResult('flash', `오류: ${error.message}`, 'error');
                updateStatus('flash', 'error', '오류');
            }
        }
        
        // Gemini Pro 테스트
        async function testGeminiPro() {
            updateStatus('pro', 'running', '실행 중...');
            showResult('pro', '요청 전송 중...', 'loading');
            
            const prompt = "AI가 교육을 어떻게 바꿀까? 한국어로 200자 정도로 설명해주세요.";
            
            try {
                const response = await fetch(
                    `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash-exp:generateContent?key=${GEMINI_KEY}`,
                    {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({
                            contents: [{
                                parts: [{ text: prompt }]
                            }],
                            generationConfig: {
                                temperature: 0.7,
                                maxOutputTokens: 500
                            }
                        })
                    }
                );
                
                if (!response.ok) {
                    throw new Error(`HTTP ${response.status}`);
                }
                
                const data = await response.json();
                const content = data.candidates?.[0]?.content?.parts?.[0]?.text;
                
                if (content) {
                    showResult('pro', `✅ 성공!\n\n${content}`, 'success');
                    updateStatus('pro', 'success', '완료');
                } else {
                    showResult('pro', `⚠️ 콘텐츠 없음`, 'error');
                    updateStatus('pro', 'error', '콘텐츠 없음');
                }
                
            } catch (error) {
                showResult('pro', `❌ 오류: ${error.message}`, 'error');
                updateStatus('pro', 'error', '오류');
            }
        }
        
        // Gemini Pro 간단한 테스트
        async function testGeminiProSimple() {
            updateStatus('pro', 'running', '간단 테스트 중...');
            
            try {
                const response = await fetch(
                    `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash-exp:generateContent?key=${GEMINI_KEY}`,
                    {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({
                            contents: [{
                                parts: [{ text: "1+1" }]
                            }]
                        })
                    }
                );
                
                const data = await response.json();
                const content = data.candidates?.[0]?.content?.parts?.[0]?.text;
                
                showResult('pro', content || '응답 없음', content ? 'success' : 'error');
                updateStatus('pro', content ? 'success' : 'error', content ? '완료' : '실패');
                
            } catch (error) {
                showResult('pro', `오류: ${error.message}`, 'error');
                updateStatus('pro', 'error', '오류');
            }
        }
        
        // GLM 테스트
        async function testGLM() {
            updateStatus('glm', 'running', '실행 중...');
            showResult('glm', '요청 전송 중...', 'loading');
            
            try {
                const response = await fetch('http://localhost:11434/api/generate', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        model: 'glm-4.6:cloud',
                        prompt: 'AI가 교육을 어떻게 바꿀까? 한국어로 200자 정도로 설명해주세요.',
                        stream: false,
                        options: {
                            temperature: 0.7,
                            num_predict: 500
                        }
                    })
                });
                
                const responseText = await response.text();
                console.log('GLM raw response:', responseText);
                
                if (!response.ok) {
                    throw new Error(`HTTP ${response.status}: ${responseText}`);
                }
                
                const data = JSON.parse(responseText);
                const content = data.response;
                
                if (content) {
                    showResult('glm', `✅ 성공!\n\n${content}`, 'success');
                    updateStatus('glm', 'success', '완료');
                } else {
                    showResult('glm', `⚠️ 콘텐츠 없음\n\n응답:\n${JSON.stringify(data, null, 2)}`, 'error');
                    updateStatus('glm', 'error', '콘텐츠 없음');
                }
                
            } catch (error) {
                showResult('glm', `❌ 오류: ${error.message}`, 'error');
                updateStatus('glm', 'error', '오류');
                console.error('GLM error:', error);
            }
        }
        
        // GLM 간단한 테스트
        async function testGLMSimple() {
            updateStatus('glm', 'running', '간단 테스트 중...');
            
            try {
                // chat 엔드포인트 사용
                const response = await fetch('http://localhost:11434/api/chat', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        model: 'glm-4.6:cloud',
                        messages: [
                            { role: 'user', content: '안녕하세요' }
                        ],
                        stream: false
                    })
                });
                
                const data = await response.json();
                console.log('GLM simple test response:', data);
                
                const content = data.message?.content;
                
                showResult('glm', content || `응답 구조: ${JSON.stringify(data, null, 2)}`, content ? 'success' : 'error');
                updateStatus('glm', content ? 'success' : 'error', content ? '완료' : '실패');
                
            } catch (error) {
                showResult('glm', `오류: ${error.message}`, 'error');
                updateStatus('glm', 'error', '오류');
            }
        }
        
        // DeepSeek 테스트
        async function testDeepSeek() {
            updateStatus('deepseek', 'running', '실행 중...');
            showResult('deepseek', '요청 전송 중...', 'loading');
            
            try {
                const response = await fetch('http://localhost:11434/api/chat', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        model: 'deepseek-v3.1:671b-cloud',
                        messages: [
                            { role: 'user', content: 'AI가 교육을 어떻게 바꿀까? 한국어로 200자 정도로 설명해주세요.' }
                        ],
                        stream: false,
                        options: {
                            temperature: 0.7,
                            num_predict: 500
                        }
                    })
                });
                
                const data = await response.json();
                const content = data.message?.content;
                
                if (content) {
                    showResult('deepseek', `✅ 성공!\n\n${content}`, 'success');
                    updateStatus('deepseek', 'success', '완료');
                } else {
                    showResult('deepseek', `⚠️ 콘텐츠 없음`, 'error');
                    updateStatus('deepseek', 'error', '콘텐츠 없음');
                }
                
            } catch (error) {
                showResult('deepseek', `❌ 오류: ${error.message}`, 'error');
                updateStatus('deepseek', 'error', '오류');
            }
        }
    </script>
</body>
</html>