<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI 통합 자동 블로깅 시스템</title>
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    
    <!-- Custom CSS -->
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #f5f5f5;
            color: #333;
        }
        
        /* 레이아웃 */
        .app-container {
            display: flex;
            height: 100vh;
        }
        
        /* 사이드바 */
        .sidebar {
            width: 280px;
            background: #2c3e50;
            color: white;
            overflow-y: auto;
            flex-shrink: 0;
        }
        
        .sidebar-header {
            padding: 20px;
            background: #34495e;
            text-align: center;
            border-bottom: 2px solid #1a252f;
        }
        
        .sidebar-header h2 {
            font-size: 22px;
            margin-bottom: 5px;
        }
        
        /* 네비게이션 */
        .nav-section {
            margin-bottom: 2px;
        }
        
        .nav-header {
            padding: 12px 20px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 10px;
            transition: background 0.3s;
            background: rgba(255,255,255,0.05);
        }
        
        .nav-header:hover {
            background: rgba(255,255,255,0.1);
        }
        
        .nav-header i {
            width: 20px;
            text-align: center;
        }
        
        .nav-items {
            list-style: none;
            display: none;
            background: rgba(0,0,0,0.2);
        }
        
        .nav-section.active .nav-items {
            display: block;
        }
        
        .nav-items a {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 10px 20px 10px 40px;
            color: #ecf0f1;
            text-decoration: none;
            font-size: 14px;
            transition: all 0.3s;
        }
        
        .nav-items a:hover {
            background: rgba(255,255,255,0.1);
            padding-left: 45px;
        }
        
        .nav-items a.active {
            background: #3498db;
        }
        
        /* 카테고리 표시 */
        .category-list {
            background: rgba(0,0,0,0.3);
            margin: 5px 0;
        }
        
        .category-item {
            padding: 8px 20px 8px 50px;
            color: #bdc3c7;
            font-size: 13px;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .category-item:hover {
            background: rgba(255,255,255,0.1);
            color: white;
        }
        
        .category-count {
            background: rgba(255,255,255,0.2);
            padding: 2px 8px;
            border-radius: 10px;
            font-size: 11px;
        }
        
        /* 메인 콘텐츠 */
        .main-content {
            flex: 1;
            overflow-y: auto;
            background: #ecf0f1;
        }
        
        /* 탭 네비게이션 */
        .tab-navigation {
            background: white;
            padding: 0 30px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            display: flex;
            align-items: center;
            position: sticky;
            top: 0;
            z-index: 10;
        }
        
        .tab-item {
            padding: 15px 20px;
            cursor: pointer;
            border-bottom: 3px solid transparent;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .tab-item:hover {
            background: #f8f9fa;
        }
        
        .tab-item.active {
            border-bottom-color: #3498db;
            color: #3498db;
        }
        
        /* 콘텐츠 영역 */
        .content-area {
            padding: 30px;
        }
        
        .content-panel {
            display: none;
        }
        
        .content-panel.active {
            display: block;
        }
        
        /* 포스트 작성 영역 */
        .post-editor {
            background: white;
            border-radius: 8px;
            padding: 30px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        .editor-toolbar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 20px;
            border-bottom: 1px solid #e9ecef;
        }
        
        .toolbar-left {
            display: flex;
            gap: 10px;
        }
        
        .toolbar-right {
            display: flex;
            gap: 10px;
        }
        
        /* 버튼 스타일 */
        .btn {
            padding: 8px 16px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s;
            display: inline-flex;
            align-items: center;
            gap: 5px;
        }
        
        .btn-primary {
            background: #3498db;
            color: white;
        }
        
        .btn-primary:hover {
            background: #2980b9;
        }
        
        .btn-success {
            background: #2ecc71;
            color: white;
        }
        
        .btn-success:hover {
            background: #27ae60;
        }
        
        .btn-danger {
            background: #e74c3c;
            color: white;
        }
        
        .btn-danger:hover {
            background: #c0392b;
        }
        
        .btn-secondary {
            background: #95a5a6;
            color: white;
        }
        
        .btn-secondary:hover {
            background: #7f8c8d;
        }
        
        /* 폼 요소 */
        .form-group {
            margin-bottom: 20px;
        }
        
        .form-label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: #555;
        }
        
        .form-control {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 16px;
            transition: border-color 0.3s;
        }
        
        .form-control:focus {
            outline: none;
            border-color: #3498db;
        }
        
        textarea.form-control {
            resize: vertical;
            min-height: 400px;
            font-family: inherit;
        }
        
        /* 발행 옵션 */
        .publish-options {
            display: flex;
            gap: 20px;
            align-items: flex-start;
            margin-top: 20px;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 8px;
        }
        
        .publish-section {
            flex: 1;
        }
        
        .platform-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
            margin-top: 10px;
        }
        
        .platform-item {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 8px;
            background: white;
            border: 1px solid #e9ecef;
            border-radius: 4px;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .platform-item:hover {
            border-color: #3498db;
        }
        
        .platform-item.selected {
            background: #3498db;
            color: white;
            border-color: #3498db;
        }
        
        .platform-item input {
            cursor: pointer;
        }
        
        /* AI 뉴스 설정 */
        .news-settings {
            background: white;
            border-radius: 8px;
            padding: 30px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        .keyword-input-group {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }
        
        .keyword-input-group input {
            flex: 1;
        }
        
        .keyword-list {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-bottom: 20px;
        }
        
        .keyword-tag {
            display: inline-flex;
            align-items: center;
            gap: 5px;
            padding: 5px 12px;
            background: #3498db;
            color: white;
            border-radius: 20px;
            font-size: 14px;
        }
        
        .keyword-tag button {
            background: none;
            border: none;
            color: white;
            cursor: pointer;
            font-size: 16px;
            line-height: 1;
        }
        
        /* 유튜브 요약 */
        .youtube-input-group {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }
        
        .youtube-input-group input {
            flex: 1;
        }
        
        .youtube-preview {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
        }
        
        /* 포스트 리스트 */
        .post-list {
            display: grid;
            gap: 20px;
        }
        
        .post-card {
            background: white;
            border-radius: 8px;
            padding: 20px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            transition: all 0.3s;
        }
        
        .post-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.15);
        }
        
        .post-header {
            display: flex;
            justify-content: space-between;
            align-items: start;
            margin-bottom: 10px;
        }
        
        .post-title {
            font-size: 18px;
            font-weight: 600;
            color: #2c3e50;
            margin-bottom: 5px;
        }
        
        .post-meta {
            display: flex;
            gap: 15px;
            font-size: 13px;
            color: #7f8c8d;
        }
        
        .post-status {
            padding: 4px 10px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 500;
        }
        
        .status-draft {
            background: #f39c12;
            color: white;
        }
        
        .status-scheduled {
            background: #9b59b6;
            color: white;
        }
        
        .status-published {
            background: #2ecc71;
            color: white;
        }
        
        .post-excerpt {
            color: #555;
            line-height: 1.6;
            margin-bottom: 15px;
        }
        
        .post-actions {
            display: flex;
            gap: 10px;
        }
        
        /* 모달 */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 1000;
            align-items: center;
            justify-content: center;
        }
        
        .modal.show {
            display: flex;
        }
        
        .modal-content {
            background: white;
            padding: 30px;
            border-radius: 8px;
            width: 90%;
            max-width: 600px;
            max-height: 80vh;
            overflow-y: auto;
        }
        
        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .modal-close {
            background: none;
            border: none;
            font-size: 24px;
            cursor: pointer;
            color: #999;
        }
        
        /* 일정 선택 */
        .schedule-input {
            display: flex;
            gap: 10px;
            align-items: center;
        }
        
        .schedule-input input[type="date"],
        .schedule-input input[type="time"] {
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 4px;
        }
        
        /* 토스트 */
        .toast {
            position: fixed;
            bottom: 20px;
            right: 20px;
            padding: 15px 20px;
            background: #2ecc71;
            color: white;
            border-radius: 4px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.2);
            display: none;
            z-index: 1001;
            animation: slideIn 0.3s ease;
        }
        
        .toast.show {
            display: block;
        }
        
        .toast.error {
            background: #e74c3c;
        }
        
        @keyframes slideIn {
            from {
                transform: translateX(100%);
            }
            to {
                transform: translateX(0);
            }
        }
        
        /* 로딩 스피너 */
        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid #f3f3f3;
            border-top: 3px solid #3498db;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        /* 반응형 */
        @media (max-width: 768px) {
            .sidebar {
                position: fixed;
                left: -280px;
                height: 100%;
                z-index: 999;
                transition: left 0.3s;
            }
            
            .sidebar.show {
                left: 0;
            }
            
            .publish-options {
                flex-direction: column;
            }
            
            .platform-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="app-container">
        <!-- 사이드바 -->
        <aside class="sidebar">
            <div class="sidebar-header">
                <h2><i class="fas fa-robot"></i> AI 자동 블로깅</h2>
            </div>

            <nav class="main-navigation">
                <!-- 내 블로그 -->
                <div class="nav-section active">
                    <div class="nav-header" onclick="toggleSection(this)">
                        <i class="fas fa-blog"></i>
                        <span>내 블로그</span>
                    </div>
                    <ul class="nav-items">
                        <li><a href="#" onclick="showTab('write')" class="active"><i class="fas fa-edit"></i> 새 글 작성</a></li>
                        <li><a href="#" onclick="showTab('posts')"><i class="fas fa-list"></i> 전체 글</a></li>
                        <li>
                            <div class="category-list" id="categoryList">
                                <!-- 동적으로 카테고리 로드 -->
                            </div>
                        </li>
                        <li><a href="#" onclick="showCategoryModal()"><i class="fas fa-plus"></i> 카테고리 관리</a></li>
                    </ul>
                </div>

                <!-- AI 뉴스 -->
                <div class="nav-section">
                    <div class="nav-header" onclick="toggleSection(this)">
                        <i class="fas fa-newspaper"></i>
                        <span>AI 뉴스</span>
                    </div>
                    <ul class="nav-items">
                        <li><a href="#" onclick="showTab('news-settings')"><i class="fas fa-cog"></i> 크롤링 설정</a></li>
                        <li><a href="#" onclick="showTab('news-list')"><i class="fas fa-rss"></i> 수집된 뉴스</a></li>
                        <li><a href="#" onclick="startNewsCrawl()"><i class="fas fa-sync"></i> 지금 수집하기</a></li>
                    </ul>
                </div>

                <!-- 유튜브 요약 -->
                <div class="nav-section">
                    <div class="nav-header" onclick="toggleSection(this)">
                        <i class="fab fa-youtube"></i>
                        <span>유튜브 요약</span>
                    </div>
                    <ul class="nav-items">
                        <li><a href="#" onclick="showTab('youtube')"><i class="fas fa-video"></i> 동영상 요약</a></li>
                        <li><a href="#" onclick="showTab('youtube-list')"><i class="fas fa-history"></i> 요약 목록</a></li>
                    </ul>
                </div>

                <!-- 자동화 -->
                <div class="nav-section">
                    <div class="nav-header" onclick="toggleSection(this)">
                        <i class="fas fa-robot"></i>
                        <span>자동화</span>
                    </div>
                    <ul class="nav-items">
                        <li><a href="#" onclick="showTab('schedule')"><i class="fas fa-calendar-alt"></i> 예약 발행</a></li>
                        <li><a href="#" onclick="showTab('automation')"><i class="fas fa-cogs"></i> 자동화 규칙</a></li>
                    </ul>
                </div>

                <!-- 통계 -->
                <div class="nav-section">
                    <div class="nav-header" onclick="toggleSection(this)">
                        <i class="fas fa-chart-line"></i>
                        <span>통계</span>
                    </div>
                    <ul class="nav-items">
                        <li><a href="#" onclick="showTab('stats')"><i class="fas fa-dashboard"></i> 대시보드</a></li>
                        <li><a href="#" onclick="showTab('analytics')"><i class="fas fa-chart-bar"></i> 상세 분석</a></li>
                    </ul>
                </div>
            </nav>
        </aside>

        <!-- 메인 콘텐츠 -->
        <main class="main-content">
            <!-- 탭 네비게이션 -->
            <div class="tab-navigation">
                <div class="tab-item active" onclick="showTab('write')">
                    <i class="fas fa-edit"></i>
                    <span>글쓰기</span>
                </div>
                <div class="tab-item" onclick="showTab('posts')">
                    <i class="fas fa-list"></i>
                    <span>글 목록</span>
                </div>
                <div class="tab-item" onclick="showTab('news-settings')">
                    <i class="fas fa-newspaper"></i>
                    <span>AI 뉴스</span>
                </div>
                <div class="tab-item" onclick="showTab('youtube')">
                    <i class="fab fa-youtube"></i>
                    <span>유튜브</span>
                </div>
                <div class="tab-item" onclick="showTab('schedule')">
                    <i class="fas fa-calendar"></i>
                    <span>예약</span>
                </div>
            </div>

            <!-- 콘텐츠 영역 -->
            <div class="content-area">
                <!-- 글쓰기 패널 -->
                <div id="write-panel" class="content-panel active">
                    <div class="post-editor">
                        <div class="editor-toolbar">
                            <div class="toolbar-left">
                                <button class="btn btn-secondary" onclick="showAIHelper()">
                                    <i class="fas fa-magic"></i> AI 도우미
                                </button>
                                <button class="btn btn-secondary" onclick="insertTemplate()">
                                    <i class="fas fa-file-alt"></i> 템플릿
                                </button>
                            </div>
                            <div class="toolbar-right">
                                <button class="btn btn-secondary" onclick="saveDraft()">
                                    <i class="fas fa-save"></i> 초안 저장
                                </button>
                                <button class="btn btn-primary" onclick="showPublishOptions()">
                                    <i class="fas fa-paper-plane"></i> 발행 옵션
                                </button>
                            </div>
                        </div>

                        <form id="postForm">
                            <div class="form-group">
                                <label class="form-label">제목</label>
                                <input type="text" class="form-control" id="postTitle" placeholder="포스트 제목을 입력하세요">
                            </div>

                            <div class="form-group">
                                <label class="form-label">카테고리</label>
                                <select class="form-control" id="postCategory">
                                    <option value="">카테고리 선택</option>
                                </select>
                            </div>

                            <div class="form-group">
                                <label class="form-label">태그</label>
                                <input type="text" class="form-control" id="postTags" placeholder="태그를 입력하세요 (쉼표로 구분)">
                            </div>

                            <div class="form-group">
                                <label class="form-label">내용</label>
                                <textarea class="form-control" id="postContent" placeholder="포스트 내용을 입력하세요"></textarea>
                            </div>
                        </form>

                        <!-- 발행 옵션 -->
                        <div class="publish-options" id="publishOptions" style="display: none;">
                            <div class="publish-section">
                                <h4>발행 시간</h4>
                                <label>
                                    <input type="radio" name="publishTime" value="now" checked> 지금 바로
                                </label>
                                <label>
                                    <input type="radio" name="publishTime" value="schedule"> 예약 발행
                                </label>
                                <div class="schedule-input" style="display: none;">
                                    <input type="date" id="scheduleDate">
                                    <input type="time" id="scheduleTime">
                                </div>
                            </div>

                            <div class="publish-section">
                                <h4>발행 플랫폼</h4>
                                <div class="platform-grid">
                                    <label class="platform-item">
                                        <input type="checkbox" name="platforms" value="tistory">
                                        <i class="fas fa-blog"></i>
                                        <span>티스토리</span>
                                    </label>
                                    <label class="platform-item">
                                        <input type="checkbox" name="platforms" value="naver">
                                        <i class="fas fa-n"></i>
                                        <span>네이버</span>
                                    </label>
                                    <label class="platform-item">
                                        <input type="checkbox" name="platforms" value="velog">
                                        <i class="fas fa-v"></i>
                                        <span>Velog</span>
                                    </label>
                                    <label class="platform-item">
                                        <input type="checkbox" name="platforms" value="medium">
                                        <i class="fab fa-medium"></i>
                                        <span>Medium</span>
                                    </label>
                                </div>
                            </div>

                            <div class="publish-section">
                                <button class="btn btn-danger" onclick="publishPost()">
                                    <i class="fas fa-rocket"></i> 발행하기
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 글 목록 패널 -->
                <div id="posts-panel" class="content-panel">
                    <div class="post-list" id="postList">
                        <!-- 동적으로 포스트 로드 -->
                    </div>
                </div>

                <!-- AI 뉴스 설정 패널 -->
                <div id="news-settings-panel" class="content-panel">
                    <div class="news-settings">
                        <h3>AI 뉴스 크롤링 설정</h3>
                        
                        <div class="form-group">
                            <label class="form-label">관심 키워드</label>
                            <div class="keyword-input-group">
                                <input type="text" class="form-control" id="newsKeyword" placeholder="키워드 입력">
                                <button class="btn btn-primary" onclick="addNewsKeyword()">추가</button>
                            </div>
                            <div class="keyword-list" id="keywordList">
                                <!-- 동적으로 키워드 표시 -->
                            </div>
                        </div>

                        <div class="form-group">
                            <label class="form-label">뉴스 소스</label>
                            <div class="platform-grid">
                                <label class="platform-item">
                                    <input type="checkbox" name="newsSources" value="google" checked>
                                    <i class="fab fa-google"></i>
                                    <span>구글 뉴스</span>
                                </label>
                                <label class="platform-item">
                                    <input type="checkbox" name="newsSources" value="naver">
                                    <i class="fas fa-n"></i>
                                    <span>네이버 뉴스</span>
                                </label>
                                <label class="platform-item">
                                    <input type="checkbox" name="newsSources" value="reddit">
                                    <i class="fab fa-reddit"></i>
                                    <span>Reddit</span>
                                </label>
                                <label class="platform-item">
                                    <input type="checkbox" name="newsSources" value="hackernews">
                                    <i class="fab fa-hacker-news"></i>
                                    <span>Hacker News</span>
                                </label>
                            </div>
                        </div>

                        <div class="form-group">
                            <label class="form-label">자동 수집 주기</label>
                            <select class="form-control">
                                <option value="manual">수동</option>
                                <option value="hourly">매시간</option>
                                <option value="daily">매일</option>
                                <option value="weekly">매주</option>
                            </select>
                        </div>

                        <button class="btn btn-success" onclick="saveNewsSettings()">
                            <i class="fas fa-save"></i> 설정 저장
                        </button>
                    </div>
                </div>

                <!-- 유튜브 요약 패널 -->
                <div id="youtube-panel" class="content-panel">
                    <div class="news-settings">
                        <h3>유튜브 동영상 요약</h3>
                        
                        <div class="form-group">
                            <label class="form-label">유튜브 URL</label>
                            <div class="youtube-input-group">
                                <input type="text" class="form-control" id="youtubeUrl" placeholder="https://www.youtube.com/watch?v=...">
                                <button class="btn btn-primary" onclick="analyzeYoutube()">
                                    <i class="fas fa-search"></i> 분석
                                </button>
                            </div>
                        </div>

                        <div class="youtube-preview" id="youtubePreview" style="display: none;">
                            <!-- 유튜브 미리보기 -->
                        </div>

                        <div class="form-group">
                            <label class="form-label">요약 옵션</label>
                            <div class="platform-grid">
                                <label class="platform-item">
                                    <input type="checkbox" name="summaryOptions" value="transcript" checked>
                                    <i class="fas fa-file-alt"></i>
                                    <span>전체 대본</span>
                                </label>
                                <label class="platform-item">
                                    <input type="checkbox" name="summaryOptions" value="summary" checked>
                                    <i class="fas fa-compress"></i>
                                    <span>핵심 요약</span>
                                </label>
                                <label class="platform-item">
                                    <input type="checkbox" name="summaryOptions" value="keypoints" checked>
                                    <i class="fas fa-list"></i>
                                    <span>주요 포인트</span>
                                </label>
                                <label class="platform-item">
                                    <input type="checkbox" name="summaryOptions" value="blog">
                                    <i class="fas fa-blog"></i>
                                    <span>블로그 포스트로 변환</span>
                                </label>
                            </div>
                        </div>

                        <button class="btn btn-success" onclick="summarizeYoutube()">
                            <i class="fas fa-magic"></i> 요약 생성
                        </button>
                    </div>
                </div>

                <!-- 예약 패널 -->
                <div id="schedule-panel" class="content-panel">
                    <div class="post-list" id="scheduledPosts">
                        <!-- 예약된 포스트 목록 -->
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- 카테고리 관리 모달 -->
    <div class="modal" id="categoryModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>카테고리 관리</h3>
                <button class="modal-close" onclick="hideCategoryModal()">&times;</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label class="form-label">새 카테고리</label>
                    <div class="keyword-input-group">
                        <input type="text" class="form-control" id="newCategoryName" placeholder="카테고리 이름">
                        <button class="btn btn-primary" onclick="addCategory()">추가</button>
                    </div>
                </div>
                <div id="categoryManageList">
                    <!-- 카테고리 목록 -->
                </div>
            </div>
        </div>
    </div>

    <!-- 토스트 알림 -->
    <div class="toast" id="toast"></div>

    <!-- AI 뉴스 API 연동 -->
    <script src="js/news-api.js"></script>
    
    <script>
        // 로컬 스토리지 키
        const STORAGE_KEYS = {
            categories: 'autoblog_categories',
            posts: 'autoblog_posts',
            drafts: 'autoblog_drafts',
            newsKeywords: 'autoblog_news_keywords',
            newsSettings: 'autoblog_news_settings',
            youtubeSummaries: 'autoblog_youtube_summaries'
        };

        // 초기화
        document.addEventListener('DOMContentLoaded', function() {
            loadCategories();
            loadCategorySidebar();
            loadNewsKeywords();
            setupPlatformCheckboxes();
            setupPublishTimeRadios();
            showTab('write');
        });

        // 사이드바 토글
        function toggleSection(header) {
            const section = header.parentElement;
            section.classList.toggle('active');
        }

        // 탭 전환
        function showTab(tabName) {
            // 모든 탭 비활성화
            document.querySelectorAll('.tab-item').forEach(tab => {
                tab.classList.remove('active');
            });
            document.querySelectorAll('.content-panel').forEach(panel => {
                panel.classList.remove('active');
            });
            
            // 선택된 탭 활성화
            const tabMap = {
                'write': 0,
                'posts': 1,
                'news-settings': 2,
                'youtube': 3,
                'schedule': 4
            };
            
            if (tabMap[tabName] !== undefined) {
                document.querySelectorAll('.tab-item')[tabMap[tabName]].classList.add('active');
            }
            
            document.getElementById(tabName + '-panel')?.classList.add('active');
            
            // 탭별 데이터 로드
            if (tabName === 'posts') {
                loadPosts();
            } else if (tabName === 'schedule') {
                loadScheduledPosts();
            }
        }

        // 카테고리 관리
        function loadCategories() {
            const categories = getCategories();
            const select = document.getElementById('postCategory');
            select.innerHTML = '<option value="">카테고리 선택</option>';
            
            categories.forEach(cat => {
                const option = document.createElement('option');
                option.value = cat.id;
                option.textContent = cat.name;
                select.appendChild(option);
            });
        }

        function loadCategorySidebar() {
            const categories = getCategories();
            const posts = getPosts();
            const categoryList = document.getElementById('categoryList');
            
            categoryList.innerHTML = categories.map(cat => {
                const count = posts.filter(p => p.category === cat.id).length;
                return `
                    <div class="category-item" onclick="filterByCategory('${cat.id}')">
                        <span>${cat.name}</span>
                        <span class="category-count">${count}</span>
                    </div>
                `;
            }).join('');
        }

        function showCategoryModal() {
            document.getElementById('categoryModal').classList.add('show');
            loadCategoryManageList();
        }

        function hideCategoryModal() {
            document.getElementById('categoryModal').classList.remove('show');
        }

        function loadCategoryManageList() {
            const categories = getCategories();
            const list = document.getElementById('categoryManageList');
            
            list.innerHTML = categories.map(cat => `
                <div class="category-item">
                    <span>${cat.name}</span>
                    <button class="btn btn-danger" onclick="deleteCategory('${cat.id}')">삭제</button>
                </div>
            `).join('');
        }

        function addCategory() {
            const name = document.getElementById('newCategoryName').value.trim();
            if (!name) {
                showToast('카테고리 이름을 입력하세요', 'error');
                return;
            }
            
            const categories = getCategories();
            categories.push({
                id: 'cat_' + Date.now(),
                name: name
            });
            
            saveCategories(categories);
            document.getElementById('newCategoryName').value = '';
            
            loadCategories();
            loadCategorySidebar();
            loadCategoryManageList();
            showToast('카테고리가 추가되었습니다');
        }

        function deleteCategory(id) {
            if (!confirm('이 카테고리를 삭제하시겠습니까?')) return;
            
            const categories = getCategories().filter(cat => cat.id !== id);
            saveCategories(categories);
            
            loadCategories();
            loadCategorySidebar();
            loadCategoryManageList();
            showToast('카테고리가 삭제되었습니다');
        }

        // 포스트 작성
        function saveDraft() {
            const post = getPostData();
            post.status = 'draft';
            post.id = 'post_' + Date.now();
            post.createdAt = new Date().toISOString();
            
            const posts = getPosts();
            posts.push(post);
            savePosts(posts);
            
            showToast('초안이 저장되었습니다');
            document.getElementById('postForm').reset();
        }

        function showPublishOptions() {
            const post = getPostData();
            if (!post.title || !post.content) {
                showToast('제목과 내용을 입력하세요', 'error');
                return;
            }
            
            document.getElementById('publishOptions').style.display = 'block';
        }

        function publishPost() {
            const post = getPostData();
            if (!validatePost(post)) return;
            
            const publishTime = document.querySelector('input[name="publishTime"]:checked').value;
            const platforms = getSelectedPlatforms();
            
            if (platforms.length === 0) {
                showToast('발행할 플랫폼을 선택하세요', 'error');
                return;
            }
            
            post.id = 'post_' + Date.now();
            post.createdAt = new Date().toISOString();
            post.platforms = platforms;
            
            if (publishTime === 'now') {
                post.status = 'published';
                post.publishedAt = new Date().toISOString();
                
                // 각 플랫폼으로 발행
                platforms.forEach(platform => {
                    publishToPlatform(post, platform);
                });
            } else {
                post.status = 'scheduled';
                post.scheduledAt = getScheduledDateTime();
            }
            
            const posts = getPosts();
            posts.push(post);
            savePosts(posts);
            
            showToast(publishTime === 'now' ? '발행되었습니다' : '예약되었습니다');
            document.getElementById('postForm').reset();
            document.getElementById('publishOptions').style.display = 'none';
        }

        // AI 뉴스
        function loadNewsKeywords() {
            const keywords = getNewsKeywords();
            const list = document.getElementById('keywordList');
            
            list.innerHTML = keywords.map(keyword => `
                <span class="keyword-tag">
                    ${keyword}
                    <button onclick="removeNewsKeyword('${keyword}')">&times;</button>
                </span>
            `).join('');
        }

        function addNewsKeyword() {
            const keyword = document.getElementById('newsKeyword').value.trim();
            if (!keyword) return;
            
            const keywords = getNewsKeywords();
            if (!keywords.includes(keyword)) {
                keywords.push(keyword);
                saveNewsKeywords(keywords);
                loadNewsKeywords();
            }
            
            document.getElementById('newsKeyword').value = '';
        }

        function removeNewsKeyword(keyword) {
            const keywords = getNewsKeywords().filter(k => k !== keyword);
            saveNewsKeywords(keywords);
            loadNewsKeywords();
        }

        function startNewsCrawl() {
            showToast('뉴스 수집을 시작합니다...');
            
            // AI 뉴스 크롤링 시뮬레이션
            setTimeout(() => {
                showToast('15개의 새로운 뉴스를 수집했습니다');
            }, 3000);
        }

        // 유튜브 요약
        function analyzeYoutube() {
            const url = document.getElementById('youtubeUrl').value;
            if (!url) {
                showToast('유튜브 URL을 입력하세요', 'error');
                return;
            }
            
            // 유튜브 정보 가져오기 시뮬레이션
            document.getElementById('youtubePreview').innerHTML = `
                <h4>동영상 정보</h4>
                <p><strong>제목:</strong> AI가 바꾸는 미래 - 2025년 전망</p>
                <p><strong>채널:</strong> Tech Vision</p>
                <p><strong>길이:</strong> 15:32</p>
                <p><strong>조회수:</strong> 125,432회</p>
            `;
            document.getElementById('youtubePreview').style.display = 'block';
        }

        function summarizeYoutube() {
            showToast('유튜브 동영상을 요약하고 있습니다...');
            
            setTimeout(() => {
                // 요약 결과를 새 포스트로 생성
                document.getElementById('postTitle').value = '[요약] AI가 바꾸는 미래 - 2025년 전망';
                document.getElementById('postContent').value = `## 동영상 요약\n\n### 주요 내용\n1. AI 기술의 현재 상황\n2. 2025년 예상되는 변화\n3. 산업별 영향\n\n### 핵심 포인트\n- GPT-5의 출시 예정\n- 자율주행 기술의 상용화\n- AI 규제 강화\n\n[원본 동영상 링크](${document.getElementById('youtubeUrl').value})`;
                
                showTab('write');
                showToast('요약이 완료되었습니다. 글쓰기 탭에서 확인하세요');
            }, 3000);
        }

        // 포스트 목록
        function loadPosts() {
            const posts = getPosts();
            const list = document.getElementById('postList');
            
            if (posts.length === 0) {
                list.innerHTML = '<p style="text-align: center; color: #999;">작성된 포스트가 없습니다</p>';
                return;
            }
            
            list.innerHTML = posts.map(post => `
                <div class="post-card">
                    <div class="post-header">
                        <div>
                            <h3 class="post-title">${post.title}</h3>
                            <div class="post-meta">
                                <span><i class="fas fa-folder"></i> ${getCategoryName(post.category)}</span>
                                <span><i class="fas fa-calendar"></i> ${formatDate(post.createdAt)}</span>
                            </div>
                        </div>
                        <span class="post-status status-${post.status}">${getStatusText(post.status)}</span>
                    </div>
                    <p class="post-excerpt">${post.content.substring(0, 150)}...</p>
                    <div class="post-actions">
                        <button class="btn btn-secondary" onclick="editPost('${post.id}')">
                            <i class="fas fa-edit"></i> 수정
                        </button>
                        <button class="btn btn-danger" onclick="deletePost('${post.id}')">
                            <i class="fas fa-trash"></i> 삭제
                        </button>
                    </div>
                </div>
            `).join('');
        }

        function loadScheduledPosts() {
            const posts = getPosts().filter(p => p.status === 'scheduled');
            const list = document.getElementById('scheduledPosts');
            
            if (posts.length === 0) {
                list.innerHTML = '<p style="text-align: center; color: #999;">예약된 포스트가 없습니다</p>';
                return;
            }
            
            list.innerHTML = posts.map(post => `
                <div class="post-card">
                    <div class="post-header">
                        <div>
                            <h3 class="post-title">${post.title}</h3>
                            <div class="post-meta">
                                <span><i class="fas fa-clock"></i> 예약: ${formatDate(post.scheduledAt)}</span>
                                <span><i class="fas fa-share"></i> ${post.platforms.join(', ')}</span>
                            </div>
                        </div>
                    </div>
                    <div class="post-actions">
                        <button class="btn btn-success" onclick="publishNow('${post.id}')">
                            <i class="fas fa-rocket"></i> 지금 발행
                        </button>
                        <button class="btn btn-secondary" onclick="cancelSchedule('${post.id}')">
                            <i class="fas fa-times"></i> 취소
                        </button>
                    </div>
                </div>
            `).join('');
        }

        // 유틸리티 함수들
        function getPostData() {
            return {
                title: document.getElementById('postTitle').value,
                category: document.getElementById('postCategory').value,
                tags: document.getElementById('postTags').value.split(',').map(t => t.trim()).filter(t => t),
                content: document.getElementById('postContent').value
            };
        }

        function validatePost(post) {
            if (!post.title) {
                showToast('제목을 입력하세요', 'error');
                return false;
            }
            if (!post.content) {
                showToast('내용을 입력하세요', 'error');
                return false;
            }
            return true;
        }

        function getSelectedPlatforms() {
            return Array.from(document.querySelectorAll('input[name="platforms"]:checked'))
                .map(cb => cb.value);
        }

        function getScheduledDateTime() {
            const date = document.getElementById('scheduleDate').value;
            const time = document.getElementById('scheduleTime').value;
            return new Date(`${date}T${time}`).toISOString();
        }

        function publishToPlatform(post, platform) {
            console.log(`Publishing to ${platform}:`, post);
            // 실제 API 호출 구현
        }

        function setupPlatformCheckboxes() {
            document.querySelectorAll('.platform-item input').forEach(checkbox => {
                checkbox.addEventListener('change', function() {
                    this.closest('.platform-item').classList.toggle('selected', this.checked);
                });
            });
        }

        function setupPublishTimeRadios() {
            document.querySelectorAll('input[name="publishTime"]').forEach(radio => {
                radio.addEventListener('change', function() {
                    const scheduleInput = document.querySelector('.schedule-input');
                    scheduleInput.style.display = this.value === 'schedule' ? 'flex' : 'none';
                });
            });
        }

        // 로컬 스토리지 함수들
        function getCategories() {
            const saved = localStorage.getItem(STORAGE_KEYS.categories);
            return saved ? JSON.parse(saved) : [
                { id: 'tech', name: '기술' },
                { id: 'ai', name: 'AI' },
                { id: 'news', name: '뉴스' }
            ];
        }

        function saveCategories(categories) {
            localStorage.setItem(STORAGE_KEYS.categories, JSON.stringify(categories));
        }

        function getPosts() {
            const saved = localStorage.getItem(STORAGE_KEYS.posts);
            return saved ? JSON.parse(saved) : [];
        }

        function savePosts(posts) {
            localStorage.setItem(STORAGE_KEYS.posts, JSON.stringify(posts));
        }

        function getNewsKeywords() {
            const saved = localStorage.getItem(STORAGE_KEYS.newsKeywords);
            return saved ? JSON.parse(saved) : ['AI', '인공지능', 'ChatGPT'];
        }

        function saveNewsKeywords(keywords) {
            localStorage.setItem(STORAGE_KEYS.newsKeywords, JSON.stringify(keywords));
        }

        function getCategoryName(categoryId) {
            const categories = getCategories();
            const category = categories.find(c => c.id === categoryId);
            return category ? category.name : '미분류';
        }

        function getStatusText(status) {
            const statusMap = {
                'draft': '초안',
                'scheduled': '예약됨',
                'published': '발행됨'
            };
            return statusMap[status] || status;
        }

        function formatDate(dateString) {
            const date = new Date(dateString);
            return date.toLocaleDateString('ko-KR') + ' ' + date.toLocaleTimeString('ko-KR', { hour: '2-digit', minute: '2-digit' });
        }

        // 토스트 알림
        function showToast(message, type = 'success') {
            const toast = document.getElementById('toast');
            toast.textContent = message;
            toast.className = 'toast show' + (type === 'error' ? ' error' : '');
            
            setTimeout(() => {
                toast.classList.remove('show');
            }, 3000);
        }

        // 포스트 편집/삭제
        function editPost(postId) {
            const posts = getPosts();
            const post = posts.find(p => p.id === postId);
            if (!post) return;
            
            document.getElementById('postTitle').value = post.title;
            document.getElementById('postCategory').value = post.category;
            document.getElementById('postTags').value = post.tags.join(', ');
            document.getElementById('postContent').value = post.content;
            
            showTab('write');
        }

        function deletePost(postId) {
            if (!confirm('이 포스트를 삭제하시겠습니까?')) return;
            
            const posts = getPosts().filter(p => p.id !== postId);
            savePosts(posts);
            loadPosts();
            showToast('포스트가 삭제되었습니다');
        }

        function filterByCategory(categoryId) {
            showTab('posts');
            // 카테고리별 필터링 구현
        }

        // AI 도우미
        function showAIHelper() {
            showToast('AI 도우미를 준비 중입니다...');
        }

        function insertTemplate() {
            const templates = {
                'tech-review': {
                    title: '[리뷰] 제품명 - 장단점 총정리',
                    content: '## 제품 소개\n\n## 주요 특징\n\n## 장점\n\n## 단점\n\n## 총평'
                },
                'tutorial': {
                    title: '[튜토리얼] 주제 - 단계별 가이드',
                    content: '## 소개\n\n## 준비물\n\n## 단계별 진행\n\n### 1단계\n\n### 2단계\n\n## 마무리'
                }
            };
            
            // 템플릿 선택 UI 구현
            const template = templates['tech-review'];
            document.getElementById('postTitle').value = template.title;
            document.getElementById('postContent').value = template.content;
        }

        // 뉴스 설정 저장
        function saveNewsSettings() {
            const settings = {
                keywords: getNewsKeywords(),
                sources: Array.from(document.querySelectorAll('input[name="newsSources"]:checked')).map(cb => cb.value),
                interval: document.querySelector('.news-settings select').value
            };
            
            localStorage.setItem(STORAGE_KEYS.newsSettings, JSON.stringify(settings));
            showToast('뉴스 설정이 저장되었습니다');
        }
    </script>
</body>
</html>